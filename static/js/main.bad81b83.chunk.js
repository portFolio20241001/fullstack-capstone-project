(this["webpackJsonpgiftlink-frontend"]=this["webpackJsonpgiftlink-frontend"]||[]).push([[0],[,,,,,,,,function(e,a,t){e.exports=t(22)},,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(7),c=t.n(r),s=t(3),o=(t(16),t(2));var m=function(e){let{onVisit:a}=e;return l.a.createElement("div",{className:"container text-center mt-5"},l.a.createElement("h1",null,"Welcome to GiftLink"),l.a.createElement("p",null,"Share Gifts and Joy!"),l.a.createElement("button",{className:"btn btn-primary",onClick:a},"Get Started"))};const i="https://kenkouishi11-3060.theiadockernext-0-labs-prod-theiak8s-4-tor01.proxy.cognitiveclass.ai";console.log("backendUrl in config.js: "+i);var u=function(){const[e,a]=Object(n.useState)([]),t=Object(o.p)();return Object(n.useEffect)(()=>{(async()=>{try{let e=i+"/api/gifts";const t=await fetch(e);if(!t.ok)throw new Error("HTTP error; "+t.status);const n=await t.json();a(n)}catch(e){console.log("Fetch error: "+e.message)}})()},[]),l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row"},e.map(e=>{return l.a.createElement("div",{key:e.id,className:"col-md-4 mb-4"}," ",l.a.createElement("div",{className:"card product-card"}," ",l.a.createElement("div",{className:"image-placeholder"},e.image?l.a.createElement("img",{src:e.image,alt:e.name,className:"card-img-top"}):l.a.createElement("div",{className:"no-image-available"},"No Image Available")),l.a.createElement("div",{className:"card-body"}," ",l.a.createElement("h5",{className:"card-title"},e.name)," ",l.a.createElement("p",{className:"card-text"},(n=e.date_added,new Date(1e3*n).toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"})))," ",l.a.createElement("p",{className:"card-text "+(a=e.condition,"New"===a?"list-group-item-success":"list-group-item-warning")}," ",e.condition),l.a.createElement("button",{onClick:()=>{return a=e.id,console.log("aaa"),void t("/app/product/"+a);var a},className:"btn btn-primary"}," ","View Details"))));var a,n})))};const d=Object(n.createContext)(),g=e=>{let{children:a}=e;const[t,r]=Object(n.useState)(!1),[c,s]=Object(n.useState)("");return l.a.createElement(d.Provider,{value:{isLoggedIn:t,setIsLoggedIn:r,userName:c,setUserName:s}},a)},p=()=>Object(n.useContext)(d);t(17);var E=function(){const[e,a]=Object(n.useState)(""),[t,r]=Object(n.useState)(""),[c,m]=Object(n.useState)(""),u=Object(o.p)(),d=sessionStorage.getItem("bearer-token"),{setIsLoggedIn:g}=p();return Object(n.useEffect)(()=>{sessionStorage.getItem("auth-token")&&u("/app")},[u]),l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-6 col-lg-4"},l.a.createElement("div",{className:"login-card p-4 border rounded"},l.a.createElement("h2",{className:"text-center mb-4 font-weight-bold"},"Login"),l.a.createElement("form",{onSubmit:async n=>{n.preventDefault();const l=await fetch(i+"/api/auth/login",{method:"POST",headers:{"content-type":"application/json",Authorization:d?"Bearer "+d:""},body:JSON.stringify({email:e,password:t})}),c=await l.json();console.log("Json",c),c.authtoken?(sessionStorage.setItem("auth-token",c.authtoken),sessionStorage.setItem("name",c.userName),sessionStorage.setItem("email",c.userEmail),g(!0),u("/app")):(a(""),r(""),console.log(c.error),"\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059"===c.error?m("\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u3002\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002"):"\u30e6\u30fc\u30b6\u30fc\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002\u767b\u9332\u3055\u308c\u3066\u3044\u306a\u3044\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002"===c.error?m("\u3053\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306f\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"):m("\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"),window.errorTimeout&&clearTimeout(window.errorTimeout),window.errorTimeout=setTimeout(()=>m(""),3e3))}},l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),l.a.createElement("input",{id:"email",type:"text",className:"form-control",placeholder:"Enter your email",value:e,onChange:e=>a(e.target.value)})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),l.a.createElement("input",{id:"password",type:"password",className:"form-control",placeholder:"Enter your password",value:t,onChange:e=>r(e.target.value)})),c&&l.a.createElement("p",{className:"text-danger text-center"},c),l.a.createElement("button",{type:"submit",className:"btn btn-primary w-100 mb-3"},"Login")),l.a.createElement("p",{className:"mt-4 text-center"},"New here? ",l.a.createElement(s.b,{to:"/app/register",className:"text-primary"},"Register Here"))))))};t(18);var b=function(){const[e,a]=Object(n.useState)(""),[t,r]=Object(n.useState)(""),[c,m]=Object(n.useState)(""),[u,d]=Object(n.useState)(""),[g,E]=Object(n.useState)(""),b=Object(o.p)(),{setIsLoggedIn:v}=p();return l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-md-6 col-lg-4"},l.a.createElement("div",{className:"register-card p-4 border rounded"},l.a.createElement("h2",{className:"text-center mb-4 font-weight-bold"},"Register"),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",{htmlFor:"firstName",className:"form-label"},"FirstName"),l.a.createElement("input",{id:"firstName",type:"text",className:"form-control",placeholder:"Enter your firstName",value:e,onChange:e=>a(e.target.value)})),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",{htmlFor:"lastName",className:"form-label"},"LastName"),l.a.createElement("input",{id:"lastName",type:"text",className:"form-control",placeholder:"Enter your lastName",value:t,onChange:e=>r(e.target.value)})),l.a.createElement("div",{className:"mb-3"},l.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),l.a.createElement("input",{id:"email",type:"text",className:"form-control",placeholder:"Enter your email",value:c,onChange:e=>m(e.target.value)}),l.a.createElement("div",{className:"text-danger"},g)),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),l.a.createElement("input",{id:"password",type:"password",className:"form-control",placeholder:"Enter your password",value:u,onChange:e=>d(e.target.value)})),l.a.createElement("button",{className:"btn btn-primary w-100 mb-3",onClick:async()=>{const a=await fetch(i+"/api/auth/register",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({firstName:e,lastName:t,email:c,password:u})}),n=await a.json();console.log("json data",n),console.log("er",n.error),n.authtoken&&(sessionStorage.setItem("auth-token",n.authtoken),sessionStorage.setItem("name",e),sessionStorage.setItem("email",n.email),v(!0),b("/app")),n.error&&E(n.error)}},"Register"),l.a.createElement("p",{className:"mt-4 text-center"},"Already a member? ",l.a.createElement(s.b,{to:"/app/login",className:"text-primary"},"Login"))))))};t(6);var v=function(){const[e,a]=Object(n.useState)(""),[t,r]=Object(n.useState)(1),[c,s]=Object(n.useState)(""),[m,u]=Object(n.useState)(""),[d,g]=Object(n.useState)([]),[p,E]=Object(n.useState)("");Object(n.useEffect)(()=>{(async()=>{try{let e=i+"/api/gifts";console.log(e);const a=await fetch(e);if(!a.ok)throw new Error("HTTP\u30a8\u30e9\u30fc; "+a.status);const t=await a.json();g(t)}catch(e){E("\u5546\u54c1\u60c5\u5831\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u518d\u8a66\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),console.log("\u53d6\u5f97\u30a8\u30e9\u30fc: "+e.message)}})()},[]);const b=Object(o.p)();return l.a.createElement("div",{className:"container mt-5"}," ",l.a.createElement("div",{className:"row justify-content-center"}," ",l.a.createElement("div",{className:"col-md-6"}," ",l.a.createElement("div",{className:"filter-section mb-3 p-3 border rounded"}," ",l.a.createElement("h5",null,"\u30d5\u30a3\u30eb\u30bf\u30fc")," ",l.a.createElement("div",{className:"d-flex flex-column"}," ",l.a.createElement("label",{htmlFor:"categorySelect"},"\u30ab\u30c6\u30b4\u30ea\u30fc")," ",l.a.createElement("select",{id:"categorySelect",className:"form-control my-1",value:c,onChange:e=>s(e.target.value)},l.a.createElement("option",{value:""},"\u3059\u3079\u3066")," ",["Living","Bedroom","Bathroom","Kitchen","Office"].map(e=>l.a.createElement("option",{key:e,value:e},e))),l.a.createElement("label",{htmlFor:"conditionSelect"},"\u72b6\u614b")," ",l.a.createElement("select",{id:"conditionSelect",className:"form-control my-1",value:m,onChange:e=>u(e.target.value)},l.a.createElement("option",{value:""},"\u3059\u3079\u3066")," ",["New","Like New","Older"].map(e=>l.a.createElement("option",{key:e,value:e},e))),l.a.createElement("label",{htmlFor:"ageRange"},"\u30ea\u30ea\u30fc\u30b9\u5e74\u304c ",t," \u5e74\u672a\u6e80")," ",l.a.createElement("input",{type:"range",className:"form-control-range",id:"ageRange",min:"1",max:"10",value:t,onChange:e=>r(e.target.value)}))),l.a.createElement("input",{type:"text",className:"form-control mb-2",placeholder:"\u30a2\u30a4\u30c6\u30e0\u3092\u691c\u7d22...",value:e,onChange:e=>a(e.target.value)}),l.a.createElement("button",{className:"btn btn-primary",onClick:async()=>{const a=i+"/api/search?",n=new URLSearchParams({name:e,age_years:t,category:c,condition:m}).toString();try{const e=await fetch(`${a}${n}`);if(!e.ok)throw new Error("\u691c\u7d22\u306b\u5931\u6557\u3057\u307e\u3057\u305f");const t=await e.json();g(t),E("")}catch(l){E("\u691c\u7d22\u7d50\u679c\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u518d\u8a66\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),console.error("\u691c\u7d22\u7d50\u679c\u306e\u53d6\u5f97\u306b\u5931\u6557:",l)}}},"\u691c\u7d22")," ",p&&l.a.createElement("div",{className:"alert alert-danger mt-4"},p," "),l.a.createElement("div",{className:"search-results mt-4"}," ",d.length>0?d.map(e=>{return l.a.createElement("div",{key:e.id,className:"card mb-3"}," ",l.a.createElement("img",{src:e.image,alt:e.name,className:"card-img-top"}),l.a.createElement("div",{className:"card-body"},l.a.createElement("h5",{className:"card-title"},e.name),l.a.createElement("p",{className:"card-text"},e.description.slice(0,100),"..."),l.a.createElement("p",{className:"card-text"},"\u30ea\u30ea\u30fc\u30b9\u5e74\uff1a",(a=e.date_added,new Date(1e3*a).toLocaleString()))),l.a.createElement("div",{className:"card-footer"},l.a.createElement("button",{onClick:()=>{return a=e.id,void b("/app/product/"+a);var a},className:"btn btn-primary"},"\u8a73\u7d30\u3092\u898b\u308b")," "));var a}):l.a.createElement("div",{className:"alert alert-info",role:"alert"},"\u5546\u54c1\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002 ")))))};t(19);var N=function(){const e=Object(o.p)(),{productId:a}=Object(o.r)(),[t,r]=Object(n.useState)(null),[c,s]=Object(n.useState)(!0),[m,u]=Object(n.useState)(null);return Object(n.useEffect)(()=>{sessionStorage.getItem("auth-token")||e("/app/login");(async()=>{try{const e=`${i}/api/gifts/${a}`,t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();r(n)}catch(m){u(m.message)}finally{s(!1)}})(),window.scrollTo(0,0)},[a,e]),c?l.a.createElement("div",null,"Loading..."):m?l.a.createElement("div",null,"Error: ",m):t?l.a.createElement("div",{className:"container mt-5"},l.a.createElement("button",{className:"btn btn-secondary mb-3",onClick:()=>{e(-1)}},"Back"),l.a.createElement("div",{className:"card product-details-card"},l.a.createElement("div",{className:"card-header text-white"},l.a.createElement("h2",{className:"details-title"},t.name)),l.a.createElement("div",{className:"card-body"},l.a.createElement("div",{className:"image-placeholder-large"},t.image?l.a.createElement("img",{src:t.image,alt:t.name,className:"product-image-large"}):l.a.createElement("div",{className:"no-image-available-large"},"No Image Available")),l.a.createElement("p",null,l.a.createElement("strong",null,"Category:"),t.category,"  "),l.a.createElement("p",null,l.a.createElement("strong",null,"Condition:"),t.condition,"  "),l.a.createElement("p",null,l.a.createElement("strong",null,"Date Added:"),(d=t.date_added,new Date(1e3*d).toLocaleString()),"  "),l.a.createElement("p",null,l.a.createElement("strong",null,"Age (Years):"),t.age_years,"  "),l.a.createElement("p",null,l.a.createElement("strong",null,"Description:"),t.description,"  "))),l.a.createElement("div",{className:"comments-section mt-4"},l.a.createElement("h3",{className:"mb-3"},"Comments"),[{author:"John Doe",comment:"I would like this!"},{author:"Jane Smith",comment:"Just DMed you."},{author:"Alice Johnson",comment:"I will take it if it's still available."},{author:"Mike Brown",comment:"This is a good one!"},{author:"Sarah Wilson",comment:"My family can use one. DM me if it is still available. Thank you!"}].map((e,a)=>l.a.createElement("div",{key:a,className:"card mb-3"},l.a.createElement("div",{className:"card-body"},l.a.createElement("p",{className:"comment-author"},l.a.createElement("strong",null,e.author,":")),l.a.createElement("p",{className:"comment-text"},e.comment)))))):l.a.createElement("div",null,"Gift not found");var d};t(20);var h=()=>{const[e,a]=Object(n.useState)({}),[t,r]=Object(n.useState)({}),{setUserName:c}=p(),[s,m]=Object(n.useState)(""),[u,d]=Object(n.useState)(!1),g=Object(o.p)();Object(n.useEffect)(()=>{sessionStorage.getItem("auth-token")?E():g("/app/login")},[g]);const E=async()=>{try{const e=sessionStorage.getItem("auth-token"),t=sessionStorage.getItem("email"),n=sessionStorage.getItem("name");if(n||e){const e={name:n,email:t};a(e),r(e)}}catch(e){console.error(e)}};return l.a.createElement("div",{className:"profile-container"},u?l.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=sessionStorage.getItem("auth-token"),n=sessionStorage.getItem("email");if(!e||!n)return void g("/app/login");const l={...t},r=await fetch(i+"/api/auth/update",{method:"PUT",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json",Email:n},body:JSON.stringify(l)});if(!r.ok){console.log("\u30a8\u30e9\u30fc\u30dd\u30a4\u30f3\u30c81");const e=(await r.json()).errors.map(e=>e.msg).join(", ");throw new Error("\u30a8\u30e9\u30fc!\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f: "+e)}c(t.name),sessionStorage.setItem("name",t.name),a(t),d(!1),m("\u540d\u524d\u304c\u6b63\u5e38\u306b\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\uff01"),setTimeout(()=>{m(""),g("/")},1e3)}catch(n){console.log("\u30a8\u30e9\u30fc\u30dd\u30a4\u30f3\u30c82"),console.error(n),m(n.message)}}},l.a.createElement("label",null,"Email",l.a.createElement("input",{type:"email",name:"email",value:e.email,disabled:!0})),l.a.createElement("label",null,"Name",l.a.createElement("input",{type:"text",name:"name",value:t.name,onChange:e=>{r({...t,[e.target.name]:e.target.value})}})),l.a.createElement("button",{type:"submit"},"\u4fdd\u5b58")," ",s&&l.a.createElement("div",{className:"feedback-message "+(s.includes("\u6b63\u5e38")?"success":"error")},s)):l.a.createElement("div",{className:"profile-details"},l.a.createElement("h1",null,"\u3053\u3093\u306b\u3061\u306f, ",e.name),l.a.createElement("p",null," ",l.a.createElement("b",null,"Email:")," ",e.email),l.a.createElement("button",{onClick:()=>{d(!0)}},"\u7de8\u96c6")," ",l.a.createElement("span",{style:{color:"green",height:".5cm",display:"block",fontStyle:"italic",fontSize:"12px"}},s)," "))};t(21);function f(){const{isLoggedIn:e,setIsLoggedIn:a,userName:t,setUserName:r}=p(),c=Object(o.p)();Object(n.useEffect)(()=>{const t=sessionStorage.getItem("auth-token"),n=sessionStorage.getItem("name");t&&(e&&n?r(n):(sessionStorage.removeItem("auth-token"),sessionStorage.removeItem("name"),sessionStorage.removeItem("email"),a(!1)))},[e,a,r]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light fixed-top",id:"navbar_container"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement(s.b,{className:"navbar-brand-link",to:"/app"},"GiftLink")),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"}),"  "),l.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav"},l.a.createElement("ul",{className:"navbar-nav"},l.a.createElement("li",{className:"nav-item"},l.a.createElement(s.b,{className:"nav-link",to:"/app"},"Gifts")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(s.b,{className:"nav-link",to:"/app/search"},"Search")),l.a.createElement("ul",{className:"navbar-nav ml-auto"},e?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement("span",{className:"nav-link",style:{color:"black",cursor:"pointer"},onClick:()=>{c("/app/profile")}},"Welcome, ",t)),l.a.createElement("li",{className:"nav-item"},l.a.createElement("button",{className:"nav-link login-btn",onClick:()=>{sessionStorage.removeItem("auth-token"),sessionStorage.removeItem("name"),sessionStorage.removeItem("email"),a(!1),c("/app")}},"Logout"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{className:"nav-item"},l.a.createElement(s.b,{className:"nav-link login-btn",to:"/app/login"},"Login")),l.a.createElement("li",{className:"nav-item"},l.a.createElement(s.b,{className:"nav-link register-btn",to:"/app/register"},"Register"))))))),"  ")}var y=function(){const[e,a]=Object(n.useState)(!1);return l.a.createElement(l.a.Fragment,null,l.a.createElement(f,null),l.a.createElement(o.c,null,e?l.a.createElement(o.a,{path:"/",element:l.a.createElement(u,null)}):l.a.createElement(o.a,{path:"/",element:l.a.createElement(m,{onVisit:()=>a(!0)})}),l.a.createElement(o.a,{path:"/app",element:l.a.createElement(u,null)}),l.a.createElement(o.a,{path:"/app/login",element:l.a.createElement(E,null)}),l.a.createElement(o.a,{path:"/app/register",element:l.a.createElement(b,null)}),l.a.createElement(o.a,{path:"/app/search",element:l.a.createElement(v,null)}),l.a.createElement(o.a,{path:"/app/product/:productId",element:l.a.createElement(N,null)}),l.a.createElement(o.a,{path:"/app/profile",element:l.a.createElement(h,null)})))};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,null," ",l.a.createElement(g,null," ",l.a.createElement(y,null)," "))))}],[[8,1,2]]]);
//# sourceMappingURL=main.bad81b83.chunk.js.map